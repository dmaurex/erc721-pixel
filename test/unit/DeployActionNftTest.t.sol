// SPDX-License-Identifier: SEE LICENSE IN LICENSE

pragma solidity 0.8.30;

import {Test, console} from "forge-std/Test.sol";
import {ActionNft} from "src/ActionNft.sol";
import {DeployActionNft} from "script/DeployActionNft.s.sol";

contract DeployActionNftTest is Test {
    DeployActionNft deployer;

    function setUp() public {
        deployer = new DeployActionNft();
    }

    function testConvertingSvgToUriWorks() public view {
        string memory svg =
            '<?xml version="1.0" encoding="UTF-8"?><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="144" height="163"><path d="M0,0 L46,0 L46,1 L47,1 L47,6 L52,6 L52,7 L53,7 L53,32 L52,32 L52,33 L23,33 L23,39 L40,39 L40,40 L41,40 L41,44 L40,44 L40,45 L17,45 L17,57 L28,57 L28,58 L29,58 L29,68 L28,68 L28,69 L24,69 L24,68 L23,68 L23,63 L17,63 L17,83 L16,83 L16,84 L11,84 L11,92 L10,92 L10,93 L5,93 L5,98 L4,98 L4,99 L-1,99 L-1,105 L7,105 L7,106 L8,106 L8,110 L7,110 L7,111 L-6,111 L-6,110 L-7,110 L-7,105 L-19,105 L-19,110 L-20,110 L-20,111 L-25,111 L-25,116 L-26,116 L-26,117 L-31,117 L-31,123 L-26,123 L-26,124 L-25,124 L-25,128 L-26,128 L-26,129 L-36,129 L-36,128 L-37,128 L-37,105 L-42,105 L-42,104 L-43,104 L-43,99 L-48,99 L-48,98 L-49,98 L-49,93 L-54,93 L-54,92 L-55,92 L-55,87 L-60,87 L-60,86 L-61,86 L-61,81 L-66,81 L-66,80 L-67,80 L-67,46 L-66,46 L-66,45 L-62,45 L-62,46 L-61,46 L-61,57 L-56,57 L-56,58 L-55,58 L-55,63 L-50,63 L-50,64 L-49,64 L-49,69 L-37,69 L-37,64 L-36,64 L-36,63 L-31,63 L-31,58 L-30,58 L-30,57 L-22,57 L-22,52 L-21,52 L-21,51 L-13,51 L-13,46 L-12,46 L-12,45 L-7,45 L-7,7 L-6,7 L-6,6 L-1,6 L-1,1 L0,1 Z M5,9 L5,15 L11,15 L11,9 Z " fill="#000000" transform="translate(80,17)"/><path d="M0,0 L30,0 L30,1 L31,1 L31,2 L30,2 L30,3 L0,3 Z " fill="#000000" transform="translate(0,125)"/><path d="M0,0 L43,0 L43,3 L0,3 L0,2 L-1,2 L-1,1 L0,1 Z " fill="#000000" transform="translate(101,125)"/><path d="M0,0 L10,0 L10,3 L0,3 L0,2 L-1,2 L-1,1 L0,1 Z " fill="#000000" transform="translate(134,134)"/><path d="M0,0 L7,0 L7,1 L8,1 L8,2 L7,2 L7,3 L0,3 L0,2 L-1,2 L-1,1 L0,1 Z " fill="#000000" transform="translate(98,137)"/></svg>';
        //string memory svg = '<?xml version="1.0" encoding="UTF-8"?><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="144" height="163"><path d="M0,0 L6,0 L6,138 L-9,138 L-9,137 L-10,137 L-10,136 L-9,136 L-9,135 L-4,135 L-4,93 L-18,93 L-18,92 L-19,92 L-19,90 L-21,90 L-21,89 L-22,89 L-22,87 L-24,87 L-24,86 L-25,86 L-25,84 L-27,84 L-27,83 L-28,83 L-28,57 L-43,57 L-43,69 L-32,69 L-32,70 L-31,70 L-31,80 L-32,80 L-32,81 L-36,81 L-36,80 L-37,80 L-37,75 L-43,75 L-43,95 L-44,95 L-44,96 L-49,96 L-49,104 L-50,104 L-50,105 L-55,105 L-55,110 L-56,110 L-56,111 L-61,111 L-61,120 L-8,120 L-8,121 L-7,121 L-7,122 L-8,122 L-8,123 L-61,123 L-61,129 L-59,129 L-59,130 L-58,130 L-58,131 L-59,131 L-59,132 L-61,132 L-61,135 L-56,135 L-56,136 L-55,136 L-55,140 L-56,140 L-56,141 L-66,141 L-66,140 L-67,140 L-67,132 L-69,132 L-69,131 L-70,131 L-70,130 L-69,130 L-69,129 L-67,129 L-67,123 L-85,123 L-85,128 L-86,128 L-86,129 L-91,129 L-91,135 L-86,135 L-86,136 L-85,136 L-85,140 L-86,140 L-86,141 L-96,141 L-96,140 L-97,140 L-97,123 L-138,123 L-138,120 L-97,120 L-97,117 L-102,117 L-102,116 L-103,116 L-103,111 L-108,111 L-108,110 L-109,110 L-109,105 L-114,105 L-114,104 L-115,104 L-115,99 L-120,99 L-120,98 L-121,98 L-121,93 L-126,93 L-126,92 L-127,92 L-127,58 L-126,58 L-126,57 L-122,57 L-122,58 L-121,58 L-121,69 L-116,69 L-116,70 L-115,70 L-115,75 L-110,75 L-110,76 L-109,76 L-109,81 L-97,81 L-97,76 L-96,76 L-96,75 L-91,75 L-91,70 L-90,70 L-90,69 L-82,69 L-82,64 L-81,64 L-81,63 L-73,63 L-73,58 L-72,58 L-72,57 L-67,57 L-67,19 L-66,19 L-66,18 L-61,18 L-61,13 L-60,13 L-60,12 L-14,12 L-14,13 L-13,13 L-13,18 L-8,18 L-8,19 L-7,19 L-7,50 L-8,50 L-8,51 L-13,51 L-13,78 L-8,78 L-8,79 L-7,79 L-7,87 L-2,87 L-2,88 L-1,88 L-1,57 L-3,57 L-3,56 L-4,56 L-4,4 L-3,4 L-3,3 L-1,3 L-1,1 L0,1 Z M-55,21 L-55,33 L-43,33 L-43,21 Z M-79,117 L-79,120 L-73,120 L-73,117 Z " fill="#000000" transform="translate(138,12)"/><path d="M0,0 L4,0 L4,1 L5,1 L5,5 L4,5 L4,6 L0,6 L0,5 L-1,5 L-1,1 L0,1 Z " fill="#000000" transform="translate(87,36)"/><path d="M0,0 L7,0 L7,1 L8,1 L8,2 L7,2 L7,3 L0,3 L0,2 L-1,2 L-1,1 L0,1 Z " fill="#000000" transform="translate(15,153)"/></svg>';
        string memory expectedUri =
            "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjE2MyI+PHBhdGggZD0iTTAsMCBMNDYsMCBMNDYsMSBMNDcsMSBMNDcsNiBMNTIsNiBMNTIsNyBMNTMsNyBMNTMsMzIgTDUyLDMyIEw1MiwzMyBMMjMsMzMgTDIzLDM5IEw0MCwzOSBMNDAsNDAgTDQxLDQwIEw0MSw0NCBMNDAsNDQgTDQwLDQ1IEwxNyw0NSBMMTcsNTcgTDI4LDU3IEwyOCw1OCBMMjksNTggTDI5LDY4IEwyOCw2OCBMMjgsNjkgTDI0LDY5IEwyNCw2OCBMMjMsNjggTDIzLDYzIEwxNyw2MyBMMTcsODMgTDE2LDgzIEwxNiw4NCBMMTEsODQgTDExLDkyIEwxMCw5MiBMMTAsOTMgTDUsOTMgTDUsOTggTDQsOTggTDQsOTkgTC0xLDk5IEwtMSwxMDUgTDcsMTA1IEw3LDEwNiBMOCwxMDYgTDgsMTEwIEw3LDExMCBMNywxMTEgTC02LDExMSBMLTYsMTEwIEwtNywxMTAgTC03LDEwNSBMLTE5LDEwNSBMLTE5LDExMCBMLTIwLDExMCBMLTIwLDExMSBMLTI1LDExMSBMLTI1LDExNiBMLTI2LDExNiBMLTI2LDExNyBMLTMxLDExNyBMLTMxLDEyMyBMLTI2LDEyMyBMLTI2LDEyNCBMLTI1LDEyNCBMLTI1LDEyOCBMLTI2LDEyOCBMLTI2LDEyOSBMLTM2LDEyOSBMLTM2LDEyOCBMLTM3LDEyOCBMLTM3LDEwNSBMLTQyLDEwNSBMLTQyLDEwNCBMLTQzLDEwNCBMLTQzLDk5IEwtNDgsOTkgTC00OCw5OCBMLTQ5LDk4IEwtNDksOTMgTC01NCw5MyBMLTU0LDkyIEwtNTUsOTIgTC01NSw4NyBMLTYwLDg3IEwtNjAsODYgTC02MSw4NiBMLTYxLDgxIEwtNjYsODEgTC02Niw4MCBMLTY3LDgwIEwtNjcsNDYgTC02Niw0NiBMLTY2LDQ1IEwtNjIsNDUgTC02Miw0NiBMLTYxLDQ2IEwtNjEsNTcgTC01Niw1NyBMLTU2LDU4IEwtNTUsNTggTC01NSw2MyBMLTUwLDYzIEwtNTAsNjQgTC00OSw2NCBMLTQ5LDY5IEwtMzcsNjkgTC0zNyw2NCBMLTM2LDY0IEwtMzYsNjMgTC0zMSw2MyBMLTMxLDU4IEwtMzAsNTggTC0zMCw1NyBMLTIyLDU3IEwtMjIsNTIgTC0yMSw1MiBMLTIxLDUxIEwtMTMsNTEgTC0xMyw0NiBMLTEyLDQ2IEwtMTIsNDUgTC03LDQ1IEwtNyw3IEwtNiw3IEwtNiw2IEwtMSw2IEwtMSwxIEwwLDEgWiBNNSw5IEw1LDE1IEwxMSwxNSBMMTEsOSBaICIgZmlsbD0iIzAwMDAwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODAsMTcpIi8+PHBhdGggZD0iTTAsMCBMMzAsMCBMMzAsMSBMMzEsMSBMMzEsMiBMMzAsMiBMMzAsMyBMMCwzIFogIiBmaWxsPSIjMDAwMDAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDEyNSkiLz48cGF0aCBkPSJNMCwwIEw0MywwIEw0MywzIEwwLDMgTDAsMiBMLTEsMiBMLTEsMSBMMCwxIFogIiBmaWxsPSIjMDAwMDAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDEsMTI1KSIvPjxwYXRoIGQ9Ik0wLDAgTDEwLDAgTDEwLDMgTDAsMyBMMCwyIEwtMSwyIEwtMSwxIEwwLDEgWiAiIGZpbGw9IiMwMDAwMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNCwxMzQpIi8+PHBhdGggZD0iTTAsMCBMNywwIEw3LDEgTDgsMSBMOCwyIEw3LDIgTDcsMyBMMCwzIEwwLDIgTC0xLDIgTC0xLDEgTDAsMSBaICIgZmlsbD0iIzAwMDAwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTgsMTM3KSIvPjwvc3ZnPg==";
        string memory actualUri = deployer.svgToImageUri(svg);
        assert(keccak256(abi.encodePacked(actualUri)) == keccak256(abi.encodePacked(expectedUri)));
    }
}
